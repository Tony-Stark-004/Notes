{
	"nodes":[
		{"id":"b6d428fb329d1b05","type":"text","text":"# Configure Local YUM/DNF Repository in RHEL 8","x":-380,"y":-340,"width":707,"height":60,"color":"3"},
		{"id":"5179f45ee2a52eae","type":"text","text":"# Configure Local YUM/DNF Repository in RHEL 8\nNote: To configure Local repository we should have ISO image mounted on our system\n\n1. `df -hT`\n\t* You will see after attaching the ISO image it will automatically mounted on `/run/media`\n2. Let's mount on ISO image on our directory\n3. `mkdir -p /localrepo`\n4. `mount /dev/sr0 /localrepo`\n5. `df -hT`\n\t* You will see the mounted ISO image on `/localrepo`\n6. `cd /localrepo`\n7. `ls` \n\toutput is: \n\t![[Pasted image 20250119205342.png]]\n8. Here `AppStream` contains two directory inside it which is\n\t* `Packages`\n\t* `repodata`\n\t* Also `AppStream --> Packages` contain application related packages\n9. Same for `BaseOS` contains two directory inside it which is\n\t* `Packages`\n\t* `repodata`\n\t* Also `BaseOS --> Packages` contain operating system related packages\n10. We are going to download all packages from `BaseOS and AppStream` that is we want to configure in our Local repository and this is why we mounted the ISO image\n11. Let's configure Local repository\n12. `cd /etc/yum.repos.d`\n\t* This is the directory file where all package related configuration files exist so we make Local repository inside it and also our Local repository extension should be `.repo` keep in mind\n13. `vim local.repo` now i am pasting SS here see the attribute and value this thing we have to write in `local.repo` file\n    ![[Pasted image 20250119211350.png]]\n    Let's understand all the attribute one by one\n    1. [BaseOS] meaning configuring BaseOS packages\n    2. `name` give any name\n    3. `metadata_expire=-1` here `-1 or never` meaning disable and used to expire the metadata of packages after some interval. You can specify time of expiration or use `-1 or never` to disable it \n    4. `enabled=1` here This is important it enabled the local repository `1 meaning enable` and `0 meaning disable`\n    5. `baseurl` this is the path from where BaseOS package is being installed you can see `localrepo` is the mounted file and `BaseOS` is the directory which contain `Pakcages` inside it\n    6. `gpgcheck=1` meaning check the authenticity of packages whether it is valid or illegal package it uses `gpgkey` to check authenticity and `gpgkey` is also present in ISO Image which contain key of every package location where `gpgkey` file exist you can see in SS. Also `1 for enabling and 0 for disabling`\n\t7. [AppStream] meaning configuring application related packages rest of the attribute is same\n14. `cat local.repo` \n15. `cat /etc/pki/rpm-gpg/RPM-GPG-KEY-redhat-release`\n\t* This shows you the `gpgkey` file content\n16. `yum repolist all`\n\t* This shows you whether your local repository configured correctly or not\n\t* You will see the `status` column `enabled` if it is not enabled then enabled it\n17. Now you can install every package\n\t* `yum install -y httpd` it will be installed without any error\n\n\nNOTE: When we install the package we got the subscription warning we can disable it\n1. `vim /etc/yum/pluginconf.d/subscription-manager.conf`\n\t* here you get `enabled=1` just make it `enabled=0` to disable it\n\nNOTE: `/etc/yum.conf` This file is the global configuration file for repository packages\n![[Pasted image 20250119232710.png]]","x":-865,"y":-260,"width":970,"height":2260,"color":"3"},
		{"id":"46c3f988981e2859","type":"text","text":"# Permanent mounting of ISO image\nIf you unmount the ISO image then you won't be able to download the packages because while configuring the Local repository you gave the path of ISO image package\n\n1. `vim /etc/fstab`\n\t*  `/dev/sr0   /localrepo   iso9660   default   0   0`\n\t* we use `iso9660` as filesystem name for `ISO image`\n\t* `mount -a` for mounting \n\t* `df -hT` for checking whether it is mounted or not\n\nThere is one more way to mount the ISO image\n1. `mount /dev/cdrom /localrepo`\n2. So instead of `/dev/sr0` you can use `/dev/cdrom` as well\n\n\n# How to add Local repository using CLI\nIn previous step we did configure the Local repository inside `/etc/yum.repos.d/` manually. Let's configure Local repository using CLI\n\n1. `dnf config-manager --add-repo=file:///localrepo/BaseOS`\n2. `yum config-manager --add-repo=file:///localrepo/AppStream`\n\nHere these 2 commands make 2 different file. One for `BaseOS` package and another for `AppStream` package inside `/etc/yum.repos.d`. But only running these 2 commands we good to go it will configure local repository. \n\nNOTE: Also `yum` and `dnf` both command is exactly same only difference is `dnf` is much more efficient and extended version of `yum` \n\nIMPORTANT: You can also provide online server repository path instead of local \n1. `yum config-manager --add-repo=http://mirrorlist.centos.org/?release=$stream&arch=$basearch&repo=BaseOS&infra=$infra`\n\n\n#### Important command\n1. `yum repolist all` list the configured repo and shows whether it is enabled or not\n2. `yum list installed` list the installed package\n3. `yum list available` list the available package\n4. `yum list` list the all packages","x":140,"y":-260,"width":1260,"height":1000,"color":"4"}
	],
	"edges":[]
}