{
	"nodes":[
		{"id":"2dbcb36716129fb3","x":-580,"y":-220,"width":1220,"height":1040,"color":"1","type":"text","text":"Let's create `LVM` first\n1. `fdisk /dev/sda` and make a partition `/dev/sda1`\n2. `pvcreate /dev/sda1`\n3. `pvs` to check\n4. `vgcreate dataVG /dev/sda1`\n5. `vgs` to check\n6. `lvcreate -l 1000 -n dataLV dataVG`\n7. `lvs` to check \n8. `mkfs.ext4 /dev/dataVG/dataLV`\n9. `mkdir /mount_dir`\n10. `mount /dev/dataVG/dataLV /mount_dir`\n11. `df -hT` to check whether it is mounted or not\n12. `cd /mount_dir`\n13. `create data inside /mount_dir`\n\n***\n\n***How to migrate data of  disk `/dev/sda1` or say `LVM dataLV`***\n\n1. `fdisk /dev/sdb` and make a partition `/dev/sdb1`\n2. `lets migrate disk /dev/sda1 data to /dev/sdb1` to do that create `physical volume`\n3. `pvcreate /dev/sdb1`\n4. `Here whenever we want to migrate make sure to extend the volume group with physical volume of partition disk (/dev/sdb1) on which you are migrating ` so,\n5. `vgextend dataVG /dev/sdb1` here we are migrating on `/dev/sdb1` so extended the `volume group of /dev/sda1 on which data is right now`\n6. `vgs` you will see the increased size because we extended the `volume group`\n7. check dependencies between disk so migration happen to do that\n8. `ls -l /dev/ | grep sd`\n9. `dmsetup deps /dev/dataVG/dataLV` here because we extend the `dataVG by size of /dev/sdb1` and `dataVG is actually made by /dev/sda1` that's why it count as one `/dataVG/dataLV` and checking `/dataVG/dataLV` dependencies actually checking the `/dev/sda1 and /dev/sdb1`\n10. `if dependencies count is 1 or 2 then it means easily migration there is no issue`\n11. `pvmove -n lvm_name source_physical_volume_name destination_physical_volume_name`\n12. `pvmove -n dataLV /dev/sda1 /dev/sdb1`\n13. if you run `lsblk` you will see our LVM `/dev/dataVG/dataLV` is moved from `/dev/sda1` to `/dev/sdb1`\n14. `vgreduce dataVG /dev/sda1` we can removed `/dev/sda1` physical volume because we already migrated the data onto `/dev/sdb1`\n\nThat sat"},
		{"id":"8268f04c05706170","x":-300,"y":-300,"width":580,"height":60,"color":"3","type":"text","text":"Migrate Physical Volume (PVs) and LVM from one disk to another disk"},
		{"id":"7460fa69b1a2d3ee","x":-580,"y":-480,"width":480,"height":160,"color":"5","type":"text","text":"***NOTE*** : you can easily migrate `root` and `swap` `LVM` to other disk same as we did below\n* if you migrate `root` LVM make sure to take backup\n"}
	],
	"edges":[]
}