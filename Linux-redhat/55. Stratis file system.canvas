{
	"nodes":[
		{"id":"c035f464244d9853","type":"text","text":"`Stratis file system` --> Feature that provide advance storage capabilities Like :\n\t1. Thin provisioning\n\t2. Snapshot\n\t3. Storage tearing\n\t4. Pool based storage management\n\t5. File system and Storage monitoring\n\t6. By default it used `xfs file-system`\n\nNow,\n\n1. `dnf repolist all`\n2. `yum repolist all` Show all configured repository with their state\n3. `rpm -qi stratisd stratis-cli`\n\t1. `stratisd` is a `daemon service`\n\t2. `stratis-cli` is used to manage `stratis`\n\t3. `-qi` means `read-hat package manager query installed`\n\t4. And the command meaning it any one two `stratisd` or `stratis-cli` is installed then it will show the details of it and if not then it will say not installed \n4. `yum list installed | grep stratis` same `step 3` if `stratis` is installed then will show on output\n5. `dnf install stratisd stratis-cli -y` to install \n6. `systemctl enable --now stratisd` to start the service\n\t1. `enable` is used to enable meaning activate the `stratisd`\n\t2. `--now` is used to `start` the service\n7. `systemctl status stratisd` to see whether it enables and start or not\n8. `init 6` reboot machine if needed\n\n\n# See Step 2 -->","x":-630,"y":-260,"width":850,"height":800,"color":"1"},
		{"id":"7d6e5b2907aac573","type":"text","text":"Let's use `/dev/sdb disk`\n\n1. Make sure the `disk` is not formatted meaning No file-system present on disk `/dev/sdb`\n\t1. `blkid -p /dev/sdb`  if it will not show anything it means no file system is present\n\t\t1. `-p` meaning print\n\t2. `wipefs -a /dev/sdb` removing file system\n\t\t1. `-a` meaning all\n\n***Let's create a pool***\n\n1. `stratis pool create my_pool_1 /dev/sdb`\n\t1. `my_pool_1` is pool name\n\t2. `/dev/sdb` disk used to make pool. You can use more than one disk\n\t3. Pool is nothing it is like `volume group`. A collection of storage\n2. `stratis pool list` will show pool details\n\t1. `stratis pool my_pool_1` will show only `my_pool_1` details\n3. `stratis pool create my_pool_2 /dev/sdc /dev/sdd /dev/sde`\n\n***Let's create filesystem on a pool***\n1. `stratis fs create my_pool_1 filesystem-1`\n\t1. `fs` meaning filesystem\n\t2. `my_pool_1` is pool name\n\t3. `filesystem-1` is file-system name\n2. `stratis fs list` will show file-system details\n3. `stratis fs list my_pool_1` do same `step no 2`\n4. `lsblk -f` to see the file-system details on disk `/dev/sdb` because pool `my_pool_1` is made by `/dev/sdb`\n\n\n***Let's mount it*** \n\n1. `mkdir /data_fs`\n2. `mount /dev/stratis/my_pool_1/filesystem-1 /data_fs`\n3. `df -hT` to see whether mounted or not\n4. for `permanent mount` do entry in `/etc/fstab`\n\t1. `/dev/stratis/my_pool_1/filesystem-1   /data_fs   xfs   default   0   0`\n\t2. `mount -a`\n\n# See the step 3 --->","x":240,"y":-260,"width":880,"height":1180,"color":"5"},
		{"id":"ceed76bcf0f86f3f","type":"text","text":"\n***Let's create filesystem on a pool-2***\n1. `stratis fs create my_pool_2 filesystem-2`\n2. `blkid -p /dev/stratis/my_pool_2/filesystem-2` to see the `UUID`\n3. `stratis fs list` will show file-system details\n4. `stratis fs list my_pool_2` do same `step no 2`\n5. `lsblk -f` \n\n***Let's mount it*** \n\n1. `mkdir /block_fs`\n2. `mount /dev/stratis/my_pool_2/filesystem-2 /block_fs`\n3. `df -hT` to see whether mounted or not\n4. for `permanent mount` do entry in `/etc/fstab`\n\t1. `/dev/stratis/my_pool_2/filesystem-2   /block_fs   xfs   default   0   0`\n\t2. `mount -a`\n\n\n### How to remove file-system\n\n1. to delete `Stratis filesystem` please make sure to unmount the filesystem and also if you did the entry in `/etc/fstab` then please comment it\n\t1. `umount /block_fs`\n\t2. `vim /etc/fstab`  and comment it\n2. `stratis filesystem destroy my_pool_2 filesystem-2`\n\t1. here we are destroying filesystem i.e. `filesystem-2`\n3. `stratis filesystem list my_pool_2`\n\t1. you won't see file-system `filesystem-2` on pool `my_pool_2`\n\n\n### How to remove pool\n\n1. `stratis pool destroy my_pool_2`\n2. `stratis pool list` or `lsblk -f` \n\t1. you won't see `my_pool_2`\n\n\n### How to add addition disk on existing pool\n\n1. `stratis pool add-data my_pool_1 /dev/sdf`\n2. `stratis pool list`\n\t1. it will show extended size of pool\n\n","x":1160,"y":-260,"width":880,"height":1240,"color":"5"},
		{"id":"d6836b5710eee5b4","type":"text","text":"\n### How to create snapshot\n\n1.  `mkdir /block_fs`\n2. `mount /dev/stratis/my_pool_2/filesystem-2 /block_fs`\n3. `cd /block_fs`\n4. `cal > cal.txt; mkdir aa bb cc dd ; echo Nehral classes are awesome > nehra.txt`\n5. `ls`\n6. `du -sh .` it will show disk usage size\n7. `stratis fs snapshot my_pool_2 filesystem-2 mysnapshot`\n\t1. `mysnapshot` is `snapshot name` creating on pool `my_pool_2`\n8. `stratis filesystem list my_pool_2`\n\t1. you will see full details of pool `my_pool_2` with snapshot that we created on pool `my_pool_2`\n9. let's remove all data which er created inside `block_fs` directory\n\t1. `cd /block_fs` in case you are out of directory\n10. `rm -rf *`\n11. let's mount the `/dev/stratis/my_pool_2/filesystem-2`\n\t1. `umount /dev/stratis/my_pool_2/filesystem-2`\n12. let's create copy of snapshot so that we can restore our deleted data\n13. `stratis filesystem snapshot my_pool_2 mysnapshot block`\n\t1.  here `block` is copied-snapshot name\n14. `stratis filesystem list my_pool_2`\n\t1. This will show all the pools that are present in machine also it shows copied pool, filesystem and snapshot\n15. `mount /dev/stratis/my_pool_2/mysnapshot /block_fs`\n\t1. this time we are not mounting `filesystem-2` we are mounting `snapshot that we created` which is `mysnapshot` and reason why we do not mount `filesystem-2` because we deleted the data\n16. `cd /block_fs`\n17. `ll` you will see the all data\n\n### How to remove snapshot\n\n1. `rm /dev/stratis/my_pool_2/mysnapshot`\n\n\n### How to remove snapshot\n\n1. to delete `Stratis snapshot` please make sure to unmount the filesystem and also if you did the entry in `/etc/fstab` then please comment it\n\t1. `umount /block_fs`\n\t2. `vim /etc/fstab`  and comment it\n2. `stratis filesystem destroy my_pool_2 mysnapshot`\n\t1. here we are destroying filesystem i.e. `mysnapshot`\n3. `stratis filesystem list my_pool_2`\n\t1. you won't see file-system `mysnapshot` on pool `my_pool_2`","x":2080,"y":-260,"width":1400,"height":1300,"color":"5"},
		{"id":"4f84c3a7bdbbf7cd","type":"text","text":"Stratis file system","x":1160,"y":-360,"width":520,"height":60,"color":"3"}
	],
	"edges":[]
}